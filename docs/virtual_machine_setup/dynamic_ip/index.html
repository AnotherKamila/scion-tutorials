



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A collection of tutorial pages for SCION">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.17.1, mkdocs-material-2.0.1">
    
    
      
        <title>VPN based setup - SCION Tutorials</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-13fe57a5cd.css">
      
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="SCION Tutorials" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Virtual machine setup
                </span>
              
            
            VPN based setup
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    SCION Tutorials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Native Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Native Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../native_setup/ubuntu_x86_build/" title="Ubuntu 16.04 x86-64" class="md-nav__link">
      Ubuntu 16.04 x86-64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../native_setup/rpi_raspbian/" title="Raspberry PI - Raspbian" class="md-nav__link">
      Raspberry PI - Raspbian
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Virtual machine setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Virtual machine setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        VPN based setup
      </label>
    
    <a href="./" title="VPN based setup" class="md-nav__link md-nav__link--active">
      VPN based setup
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-one-install-virtualbox" title="Step One - install VirtualBox" class="md-nav__link">
    Step One - install VirtualBox
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-two-install-vagrant" title="Step Two - install Vagrant" class="md-nav__link">
    Step Two - install Vagrant
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-scion" title="Running SCION" class="md-nav__link">
    Running SCION
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-one-download-scion-vm" title="Step One - Download SCION VM" class="md-nav__link">
    Step One - Download SCION VM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-two-create-and-run-vm" title="Step Two - Create and run VM" class="md-nav__link">
    Step Two - Create and run VM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-three-run-scion-infrastructure" title="Step Three - Run SCION infrastructure" class="md-nav__link">
    Step Three - Run SCION infrastructure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" title="Next steps" class="md-nav__link">
    Next steps
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../static_ip/" title="Static IP setup" class="md-nav__link">
      Static IP setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      General SCION configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        General SCION configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/verifying_scion_installation/" title="Verifying installation" class="md-nav__link">
      Verifying installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/vpn_setup/" title="VPN configuration" class="md-nav__link">
      VPN configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/local_top/" title="Running on local topology" class="md-nav__link">
      Running on local topology
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/influence_path_selection/" title="Configuring path selection" class="md-nav__link">
      Configuring path selection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../general_scion_configuration/setup_sig/" title="Configuring SCION IP gateway" class="md-nav__link">
      Configuring SCION IP gateway
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Sample projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Sample projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sample_projects/fetch_temperature/" title="Read temperature sensor over SCION network" class="md-nav__link">
      Read temperature sensor over SCION network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sample_projects/access_camera/" title="Access video camera over SCION network" class="md-nav__link">
      Access video camera over SCION network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sample_projects/multipath/" title="Using multipath in SCION" class="md-nav__link">
      Using multipath in SCION
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-one-install-virtualbox" title="Step One - install VirtualBox" class="md-nav__link">
    Step One - install VirtualBox
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-two-install-vagrant" title="Step Two - install Vagrant" class="md-nav__link">
    Step Two - install Vagrant
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-scion" title="Running SCION" class="md-nav__link">
    Running SCION
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-one-download-scion-vm" title="Step One - Download SCION VM" class="md-nav__link">
    Step One - Download SCION VM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-two-create-and-run-vm" title="Step Two - Create and run VM" class="md-nav__link">
    Step Two - Create and run VM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-three-run-scion-infrastructure" title="Step Three - Run SCION infrastructure" class="md-nav__link">
    Step Three - Run SCION infrastructure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" title="Next steps" class="md-nav__link">
    Next steps
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="running-scion-in-virtual-machine-vpn-approach">Running SCION in virtual machine - VPN approach<a class="headerlink" href="#running-scion-in-virtual-machine-vpn-approach" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This tutorial will guide you through steps required to run SCION infrastructure in virtual machine. This tutorial assumes that you don't have static public IP address or cannot receive traffic on UDP port 50000 from outside network, and therefore it will use OpenVPN to proxy traffic.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have static public IP address and you can receive traffic on UDP port 50000 you should consider <a href="../static_ip">running VM without VPN</a></p>
</div>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>Running SION in virtual machine requires VirtualBox and Vagrant to be installed on your system.</p>
<h3 id="step-one-install-virtualbox">Step One - install VirtualBox<a class="headerlink" href="#step-one-install-virtualbox" title="Permanent link">&para;</a></h3>
<p>To install VirtualBox follow steps on <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox download page</a> for your system. On Ubuntu or similar Linux distro you could also install VirtualBox using packet manager:</p>
<div class="codehilite"><pre><span></span>apt-get install virtualbox
</pre></div>


<h3 id="step-two-install-vagrant">Step Two - install Vagrant<a class="headerlink" href="#step-two-install-vagrant" title="Permanent link">&para;</a></h3>
<p>To install vagrant follow steps on <a href="https://www.vagrantup.com/downloads.html">Vagrant download page</a> for your system. Also on Ubuntu you could install it from packet manager:</p>
<div class="codehilite"><pre><span></span>apt-get install vagrant
</pre></div>


<h2 id="running-scion">Running SCION<a class="headerlink" href="#running-scion" title="Permanent link">&para;</a></h2>
<p>Running SCION consists of several steps, registering SCION VM on <a href="https://coord.scionproto.net">SCIONLab Coordination Service</a>, deploying VM and running SCION infrastructure.</p>
<h3 id="step-one-download-scion-vm">Step One - Download SCION VM<a class="headerlink" href="#step-one-download-scion-vm" title="Permanent link">&para;</a></h3>
<p>In order to download VM with you must login to <a href="https://coord.scionproto.net">SCIONLab Coordination Service</a>, in case you don't have an account follow Registration process.</p>
<p>After successfully logging in, download VM configuration by clicking on <em>Create and Download SCIONLab VM Configuration</em> as presented in image below:</p>
<p><img alt="SCIONLab download page" src="../../images/scionlab_download_vm_openvpn_setup.png" /></p>
<h3 id="step-two-create-and-run-vm">Step Two - Create and run VM<a class="headerlink" href="#step-two-create-and-run-vm" title="Permanent link">&para;</a></h3>
<p>When the configuration finishes downloading, extract archive content in separate directory. On a Linux system simply running <code>tar</code> command will extract contents in separate subdirectory named as your email:</p>
<div class="codehilite"><pre><span></span>tar -xvf scion_lab_*.tar.gz
</pre></div>


<p>After extracting newly downloaded content, navigate to extracted directory. It should have following structure:</p>
<div class="codehilite"><pre><span></span>├── client.conf
├── gen
│   ├── dispatcher
│   │   ├── dispatcher.zlog.conf
│   │   └── supervisord.conf
│   └── ISD1
│       └── AS1029
│           └ ...
│
├── README
├── run.sh
└── Vagrantfile
</pre></div>


<p>Verifying that structure is the same and begin setup by running: </p>
<div class="codehilite"><pre><span></span>./run.sh
</pre></div>


<p>You will be asked for root password, after entering it follow the steps in the installation process.</p>
<h3 id="step-three-run-scion-infrastructure">Step Three - Run SCION infrastructure<a class="headerlink" href="#step-three-run-scion-infrastructure" title="Permanent link">&para;</a></h3>
<p>After successful installation of VM, you will be automatically ssh'ed into machine. </p>
<p>To run SCION you should navigate to source directory start infrastructure with following commands:</p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> go/src/github.com/netsec-ethz/scion/
./scion.sh run
</pre></div>


<h2 id="next-steps">Next steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>After running SCION infrastructure it is necessary to verify that its running properly. This is covered in tutorial <a href="../../general_scion_configuration/verifying_scion_installation">Verifying SCION Installation</a></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy 2017, Network Security Group, ETH Zurich
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://www.scion-architecture.net/" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/netsec-ethz/" class="md-footer-social__link fa fa-github-alt"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-84693e5e49.js"></script>
      
      <script>app.initialize({version:"0.17.1",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>